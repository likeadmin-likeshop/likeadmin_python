import{_ as W}from"./index.63c093ee.js";import{N as j,x as z,O as H,P as J,y as M,I as X,C as Y,D as Z,J as ee,Q as le,R as ue,B as ae,K as te,F as oe,w as ne}from"./element-plus.ef27c94c.js";import{u as me,a as de}from"./vue-router.9605b890.js";import{t as re,g as se}from"./code.91935f02.js";import{d as ie}from"./dict.54fd77f5.js";import{e as pe,f as h}from"./index.475ad718.js";import{m as be}from"./menu.931abc2f.js";import{u as ce}from"./useDictOptions.1f69b164.js";import{d as w,r as Fe,a1 as k,s as _e,o as i,c as g,X as e,P as u,u as o,k as ge,a as p,W as B,a8 as v,O as V,U as E,T as A}from"./@vue.a137a740.js";import"./@vueuse.07613b64.js";import"./@element-plus.3660753f.js";import"./lodash-es.a31ceab4.js";import"./dayjs.4eb0747d.js";import"./axios.317db7a7.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.fd318bfa.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.329a9ebf.js";import"./pinia.9b4180ce.js";import"./css-color-function.32b8b184.js";import"./color.3683ba49.js";import"./clone.a10503d0.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.c50c242d.js";import"./vue-clipboard3.51d666ae.js";import"./clipboard.e9b83688.js";import"./echarts.7e912674.js";import"./zrender.754e8e90.js";import"./tslib.60310f1a.js";import"./highlight.js.7165574c.js";import"./@highlightjs.7fc78ec7.js";const fe={class:"code-edit"},Be={class:"w-80"},Ve={class:"w-80"},Ee={class:"w-80"},ye={class:"w-80"},ve={class:"w-80"},Ne={class:"w-80"},Ce=p("div",{class:"form-tips"},"\u751F\u6210\u6587\u4EF6\u6240\u5728\u6A21\u5757\u540D",-1),De={class:"w-80"},Te={class:"w-80"},Ue=w({name:"tableEdit"}),bl=w({...Ue,setup(he){const P=me(),q=de(),{removeTab:R}=pe(),N=Fe("column"),t=k({base:{id:"",tableName:"",tableComment:"",entityName:"",authorName:"",remarks:""},column:[],gen:{functionName:"",genPath:"",genTpl:"",genType:0,moduleName:"",subTableFk:"",subTableName:"",treeParent:"",treePrimary:"",treeName:""}}),D=_e(),T=k({["base.tableName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",trigger:"blur"}],["base.tableComment"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",trigger:"blur"}],["base.entityName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",trigger:"blur"}],["base.authorName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F5C\u8005",trigger:"blur"}],["gen.moduleName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",trigger:"blur"}],["gen.functionName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",trigger:"blur"}],["gen.treePrimary"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u4E3B\u952E\u5B57\u6BB5",trigger:"blur"}],["gen.treeParent"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u7236\u7EA7\u5B57\u6BB5",trigger:"blur"}],["gen.treeName"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u540D\u79F0\u5B57\u6BB5",trigger:"blur"}]}),x=async()=>{const b=await re({id:P.query.id});Object.keys(t).forEach(a=>{t[a]=b[a]})},{optionsData:I}=ce({dictType:{api:ie},menu:{api:be,transformData(b){const a={id:0,name:"\u9876\u7EA7",children:[]};return a.children=b,a}}}),L=async()=>{var b,a;try{await((b=D.value)==null?void 0:b.validate());const{base:_,column:c,gen:d}=t;await se({..._,...d,columns:c}),h.msgSuccess("\u64CD\u4F5C\u6210\u529F"),R(),q.back()}catch(_){for(const c in _)Object.keys(T).includes(c)&&h.msgError((a=_[c][0])==null?void 0:a.message)}};return x(),(b,a)=>{const _=j,c=X,d=Y,r=Z,C=z,s=ee,n=le,F=ue,f=ae,$=te,y=H,U=J,O=M,S=oe,Q=ne,G=W;return i(),g("div",fe,[e(c,{class:"!border-none",shadow:"never"},{default:u(()=>[e(_,{content:"\u7F16\u8F91\u6570\u636E\u8868",onBack:a[0]||(a[0]=l=>b.$router.back())})]),_:1}),e(c,{class:"mt-4 !border-none",shadow:"never"},{default:u(()=>[e(S,{ref_key:"formRef",ref:D,class:"ls-form",model:o(t),"label-width":"100px",rules:o(T)},{default:u(()=>[e(O,{modelValue:o(N),"onUpdate:modelValue":a[14]||(a[14]=l=>ge(N)?N.value=l:null)},{default:u(()=>[e(C,{label:"\u57FA\u7840\u4FE1\u606F",name:"base"},{default:u(()=>[e(r,{label:"\u8868\u540D\u79F0",prop:"base.tableName"},{default:u(()=>[p("div",Be,[e(d,{modelValue:o(t).base.tableName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(t).base.tableName=l),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u8868\u63CF\u8FF0",prop:"base.tableComment"},{default:u(()=>[p("div",Ve,[e(d,{modelValue:o(t).base.tableComment,"onUpdate:modelValue":a[2]||(a[2]=l=>o(t).base.tableComment=l),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u5B9E\u4F53\u7C7B\u540D\u79F0",prop:"base.entityName"},{default:u(()=>[p("div",Ee,[e(d,{modelValue:o(t).base.entityName,"onUpdate:modelValue":a[3]||(a[3]=l=>o(t).base.entityName=l),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u4F5C\u8005",prop:"base.authorName"},{default:u(()=>[p("div",ye,[e(d,{modelValue:o(t).base.authorName,"onUpdate:modelValue":a[4]||(a[4]=l=>o(t).base.authorName=l),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",clearable:""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u5907\u6CE8"},{default:u(()=>[p("div",ve,[e(d,{modelValue:o(t).base.remarks,"onUpdate:modelValue":a[5]||(a[5]=l=>o(t).base.remarks=l),class:"w-full",type:"textarea",autosize:{minRows:4,maxRows:4},maxlength:"200","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1})]),_:1}),e(C,{label:"\u5B57\u6BB5\u7BA1\u7406",name:"column"},{default:u(()=>[e($,{data:o(t).column},{default:u(()=>[e(s,{label:"\u5B57\u6BB5\u5217\u540D",prop:"columnName"}),e(s,{label:"\u5B57\u6BB5\u63CF\u8FF0",prop:"columnComment","min-width":"120"},{default:u(({row:l})=>[e(d,{modelValue:l.columnComment,"onUpdate:modelValue":m=>l.columnComment=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u7269\u7406\u7C7B\u578B",prop:"columnType","min-width":"100"}),e(s,{label:"python\u7C7B\u578B","min-width":"100"},{default:u(({row:l})=>[e(F,{modelValue:l.pyType,"onUpdate:modelValue":m=>l.pyType=m},{default:u(()=>[e(n,{label:"Long",value:"Long"}),e(n,{label:"String",value:"String"}),e(n,{label:"Integer",value:"Integer"}),e(n,{label:"Double",value:"Double"}),e(n,{label:"BigDecimal",value:"BigDecimal"}),e(n,{label:"Date",value:"Date"}),e(n,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"python\u5C5E\u6027","min-width":"100"},{default:u(({row:l})=>[e(d,{modelValue:l.pyField,"onUpdate:modelValue":m=>l.pyField=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u5FC5\u586B",width:"80"},{default:u(({row:l})=>[e(f,{modelValue:l.isRequired,"onUpdate:modelValue":m=>l.isRequired=m,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u63D2\u5165",width:"80"},{default:u(({row:l})=>[e(f,{modelValue:l.isInsert,"onUpdate:modelValue":m=>l.isInsert=m,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u7F16\u8F91",width:"80"},{default:u(({row:l})=>[e(f,{modelValue:l.isEdit,"onUpdate:modelValue":m=>l.isEdit=m,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u5217\u8868",width:"80"},{default:u(({row:l})=>[e(f,{modelValue:l.isList,"onUpdate:modelValue":m=>l.isList=m,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u67E5\u8BE2",width:"80"},{default:u(({row:l})=>[e(f,{modelValue:l.isQuery,"onUpdate:modelValue":m=>l.isQuery=m,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u67E5\u8BE2\u65B9\u5F0F"},{default:u(({row:l})=>[e(F,{modelValue:l.queryType,"onUpdate:modelValue":m=>l.queryType=m},{default:u(()=>[e(n,{label:"=",value:"EQ"}),e(n,{label:"!=",value:"NE"}),e(n,{label:">",value:"GT"}),e(n,{label:">=",value:"GTE"}),e(n,{label:"<",value:"LT"}),e(n,{label:"<=",value:"LTE"}),e(n,{label:"LIKE",value:"LIKE"}),e(n,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u663E\u793A\u7C7B\u578B","min-width":"120"},{default:u(({row:l})=>[e(F,{modelValue:l.htmlType,"onUpdate:modelValue":m=>l.htmlType=m},{default:u(()=>[e(n,{label:"\u6587\u672C\u6846",value:"input"}),e(n,{label:"\u6570\u5B57\u6846",value:"number"}),e(n,{label:"\u6587\u672C\u57DF",value:"textarea"}),e(n,{label:"\u4E0B\u62C9\u6846",value:"select"}),e(n,{label:"\u5355\u9009\u6846",value:"radio"}),e(n,{label:"\u590D\u9009\u6846",value:"checkbox"}),e(n,{label:"\u65E5\u671F\u63A7\u4EF6",value:"datetime"}),e(n,{label:"\u56FE\u7247\u9009\u62E9\u63A7\u4EF6",value:"imageUpload"}),e(n,{label:"\u5BCC\u6587\u672C\u63A7\u4EF6",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u5B57\u5178\u7C7B\u578B","min-width":"120"},{default:u(({row:l})=>[e(F,{modelValue:l.dictType,"onUpdate:modelValue":m=>l.dictType=m,clearable:"",disabled:!(l.htmlType=="select"||l.htmlType=="radio"||l.htmlType=="checkbox"),placeholder:"\u5B57\u5178\u7C7B\u578B"},{default:u(()=>[(i(!0),g(B,null,v(o(I).dictType,(m,K)=>(i(),V(n,{key:K,label:m.dictName,value:m.dictType,disabled:!m.dictStatus},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),e(C,{label:"\u751F\u6210\u914D\u7F6E",name:"config"},{default:u(()=>[e(r,{label:"\u6A21\u677F\u7C7B\u578B",prop:"gen.genTpl",required:""},{default:u(()=>[e(U,{modelValue:o(t).gen.genTpl,"onUpdate:modelValue":a[6]||(a[6]=l=>o(t).gen.genTpl=l)},{default:u(()=>[e(y,{label:"crud"},{default:u(()=>[E("\u5355\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09")]),_:1},8,["label"]),e(y,{label:"tree"},{default:u(()=>[E("\u6811\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u6A21\u5757\u540D",prop:"gen.moduleName"},{default:u(()=>[p("div",Ne,[e(d,{modelValue:o(t).gen.moduleName,"onUpdate:modelValue":a[7]||(a[7]=l=>o(t).gen.moduleName=l),placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",clearable:""},null,8,["modelValue"]),Ce])]),_:1}),e(r,{label:"\u529F\u80FD\u540D\u79F0",prop:"gen.functionName"},{default:u(()=>[p("div",De,[e(d,{modelValue:o(t).gen.functionName,"onUpdate:modelValue":a[8]||(a[8]=l=>o(t).gen.functionName=l),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),e(r,{label:"\u751F\u6210\u65B9\u5F0F",prop:"gen.genType"},{default:u(()=>[e(U,{modelValue:o(t).gen.genType,"onUpdate:modelValue":a[9]||(a[9]=l=>o(t).gen.genType=l)},{default:u(()=>[e(y,{label:0},{default:u(()=>[E("\u538B\u7F29\u5305\u4E0B\u8F7D")]),_:1},8,["label"]),e(y,{label:1},{default:u(()=>[E("\u81EA\u5B9A\u4E49\u8DEF\u5F84")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),o(t).gen.genType==1?(i(),V(r,{key:0,label:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",prop:"gen.genPath"},{default:u(()=>[p("div",Te,[e(d,{modelValue:o(t).gen.genPath,"onUpdate:modelValue":a[10]||(a[10]=l=>o(t).gen.genPath=l),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8DEF\u5F84",clearable:""},null,8,["modelValue"])])]),_:1})):A("",!0),o(t).gen.genTpl=="tree"?(i(),g(B,{key:1},[e(r,{label:"\u6811\u4E3B\u952E\u5B57\u6BB5",prop:"gen.treePrimary"},{default:u(()=>[e(F,{class:"w-80",modelValue:o(t).gen.treePrimary,"onUpdate:modelValue":a[11]||(a[11]=l=>o(t).gen.treePrimary=l),clearable:""},{default:u(()=>[(i(!0),g(B,null,v(o(t).column,l=>(i(),V(n,{key:l.id,value:l.columnName,label:`${l.columnName}\uFF1A${l.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u6811\u7236\u7EA7\u5B57\u6BB5",prop:"gen.treeParent"},{default:u(()=>[e(F,{class:"w-80",modelValue:o(t).gen.treeParent,"onUpdate:modelValue":a[12]||(a[12]=l=>o(t).gen.treeParent=l),clearable:""},{default:u(()=>[(i(!0),g(B,null,v(o(t).column,l=>(i(),V(n,{key:l.id,value:l.columnName,label:`${l.columnName}\uFF1A${l.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u6811\u540D\u79F0\u5B57\u6BB5",prop:"gen.treeName"},{default:u(()=>[e(F,{class:"w-80",modelValue:o(t).gen.treeName,"onUpdate:modelValue":a[13]||(a[13]=l=>o(t).gen.treeName=l),clearable:""},{default:u(()=>[(i(!0),g(B,null,v(o(t).column,l=>(i(),V(n,{key:l.id,value:l.columnName,label:`${l.columnName}\uFF1A${l.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):A("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1}),e(G,null,{default:u(()=>[e(Q,{type:"primary",onClick:L},{default:u(()=>[E("\u4FDD\u5B58")]),_:1})]),_:1})])}}});export{bl as default};
